# ФАСИФ

Предложения состоят из:
- субъект
- сказуемое (глагол)
- словосочетания - актанты глагола
- обстоятельства
- вспомогательные слова (союзы, частицы и так далее)

Мы акцентируем особое внимание на глагол и его актанты - словосочетания. Именно они ассоциированы с функция языка программирования и её аргументами.

Все предложения разделены на три группы:
1. Запрашивающие информацию - получение состояния словосочетания. Например:
    - `montru dolaran kurzon.` - `ГЛАГОЛ-В-ПОВЕЛИТ-НАКЛ АКТАНТ1, АКТАНТ2 kaj АКТАНТ3 ...`
    - `ĉu ŝaltis tablan lampon en dormcxambro?`
1. Меняющие информацию - изменение состояния словосочетания
1. Сохраняющие информацию - сохранение в базу данных факта. Глаголы в не в повелительном наклонении либо глагол связка `estas`

Словосочетания могут ассоциироваться с несколькими функциями:
- получение состояния словосочетания
- изменение состояния словосочетания. При этом указывается глагол, который вызовет данную функци.

Глаголы разделены на два типа:
- получающие состояния одного или нескольких словосочетаний. Такой глагол ассоциирован с одной функцией, которая как-то обрабатывает состояния. Например: `montr`, `adici`, `multig`
- меняющие состояния словосочетания. Такой глагол не ассоциирован с какой-то конкретной функцией, а еона завист от словосочетания, употреблённого с данным глаголом. Пример:  `ŝalt`

## Порядок работы программы

После выполнения лингвистических анализов на их основании мы выполняем следующее:
1. В базе данных находим ФАСИФы для словосочетаний. Конкретно извлекаем: функцию изменения состояния, функцию получения состояния, описание аргументов. Затем уже по описанию мы извлекаем из слоосочетания аргументы функций.
1. В базе данных находим ФАСИФ для глагола: извлекаем его тип и, если есть, функцию.
1. Если глагол 1-го типа (получение состояния), то вызываем функции сначала словосчетаний, затем функцию глагола с передачей ей в качестве аргументов состояния.
1. Если глагол 2-го типа (изменение состояния), то вызываем функцию словосочетания

Вызов функций моментально произойдёт только:
- если в предложении отсутствуют обстоятельства, откладывающие его выполнение,
- и глагол находится в повелительном наклонении

## Текстовый ФАСИФ для составления ассоциаций

### Ассоциирования глагола 1-го типа с функцией

Формат очень простой:

```
#:Verb
ПутьКМодулю:Функция
    ЕстественныйЯзык1: Глагол1
    ЕстественныйЯзык1: Глагол2
    ЕстественныйЯзыкN: ГлаголN
```

Здесь мы указываем:
- ПутьКМодулю:Функция - путь к модулю и название функции, реализованной на языке программирования
- Глагол - глагол, с которым ассоциирована функция. Указывается в начальной форме, можно указать несколько через запятую - синонимы. Программа сама определит корень.
- ЕстественныйЯзык - естественный язык, в котором этот глагол будет употребляться. Можно указывать глаголы на разных языках.

Пример ФАСИФа для глагола, который просто возвращает состояния актантов:
```
#:Verb
smart_home:printToIF
    Esperanto: montri
    Englsh: to print
    Russian: показывать
```

Пример ФАСИФа для глагола, который суммирует состояния актантов:
```
#:Verb
smart_home:add
    Esperanto: adicii
    Englsh: to add
    Russian: складывать
#:Verb
```

Заметки:
```
Две функции и два глагола смены состояния:
- выключи настольный свет в спальне
- сделай настольный свет в спальне тише

Все функции должны возвращать ответ. Если в каком-то случае это невозможно, то функция должна вернуть сообщение о причинах.
```

### Ассоциирования словосочетания с функциями

```
#:WordCombination

getCondition: ПутьКМодулю:Функция

changeCondition: ПутьКМодулю:Функция
    ЕстественныйЯзык1: Глагол1
    ЕстественныйЯзык2: Глагол2
    ЕстественныйЯзыкN: ГлаголN

АргументФункции Обяз    ;  ЕстественныйЯзык1     ; ЕстественныйЯзык2   ; ЕстественныйЯзыкN
    ПередастсяВФункцию  ;  АргументноеСлово      ; АргументноеСлово    ; АргументноеСлово
    ПередастсяВФункцию  ;  АргументноеСлово      ; АргументноеСлово    ; АргументноеСлово
    ПередастсяВФункцию  ;  АргументноеСлово      ; АргументноеСлово    ; АргументноеСлово
    ПередастсяВФункцию  ;  АргументноеСлово      ; АргументноеСлово    ; АргументноеСлово

АргументФункции Обяз    ;  ЕстественныйЯзык1     ; ЕстественныйЯзык2   ; ЕстественныйЯзыкN

ЕстественныйЯзык1
    АргументноеСлово: Гипероним
    АргументноеСлово: Гипероним, Гипероним2, ГиперонимN
    Словосочетание
ЕстественныйЯзыкN
    доллара: валюта
    русскому: страна, национальность
    Словосочетание
```


```
#:WordCombination
# ################################################

getCondition: CurrencyLoader/GetCourse  # Назначение: ИмяМодуляБезРасширения/ИмяФункции

currency y ;  Esperanto ; Russian
# пробелы в начале строки обязательны
    USD      ;  dolara   ; доллара
    RUB      ;  rubla    ;
    EUR      ;  euxra     ;
    UAH      ;  hrivna   ;
country n ;  Esperanto
    Russia  ;  rusia
    Belarus ;  belarusia
    Ukraine ;  ukrainia
    Georgia ;  kartvela
#country n #- если не требуется замена значения аргумента

Esperanto
    dolara: mono # аргументное слова: абстрактные группы через запятую
    rusia: lando # нужно решить вопрос об изменении падежей у прилагательных, ну а пока мы не можем написать de rusia.
    dolara kurzo de rusia banko
Russian
    доллара: валюта
    русскому: страна, национальность
    курс доллара согласно русскому банку
```

## Представление ФАСИФа в базе данных

В таблице глаголов хранятся только глаголы 1-го типа.

| Корень глагола |    Путь к функции    |
|:--------------:|----------------------|
|  montr         | smart_home:printToIF |
|  adici         | smart_home:add       |

ФАСИФ для словосочетания содержит следующую инфрмацию:
- функция получения состояния
- функции изменения состояния с глаголами
- аргументы

## Внутренний язык: смешение функций языка программирования и лингвистической информации

Внутренние предложения делятся на следующие виды:
- run - исполнительные. Глагол в повелительном наклонении. ПТакое предложение просто выполняется.
- fact - констатация факта. Глагол в неповелительном наклонении, также глагол-связка. 
- construction - конструкция. 

```python
{
 # тип внутреннего предложения:
 'type_sentence': 'run', 
 # Если глагол 1-го типа, то common_fucntion = None (изменение состояния). Вызываем функцию у словосочетания
 # Если глагол 2-го типа, то common_fucntion = функции (получение состояний). Вызваем функцию и словосочетаний и результаты передаём данной функции
 'verb': {
     'func_common': None,
     'used_antonym': None,
     'answer_type': None,
 }
 'word_combinations': [
     {'func_get_value': None,
      'func_set_value': None,
      'arguments': [],
     }
 ]
}
```
